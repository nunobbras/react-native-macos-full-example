"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
var noop = function noop() {};

function createFakePromise(thenResult) {
    return {
        then: function then() {
            var cb = arguments.length <= 0 || arguments[0] === undefined ? noop : arguments[0];

            cb(thenResult);
            return createFakePromise();
        },
        "catch": function _catch() {
            return createFakePromise();
        }
    };
}

exports.default = function (key) {
    return {
        load: function load() {
            var jsonState = localStorage.getItem(key);
            var jsonObj = JSON.parse(jsonState) || {};
            return createFakePromise(jsonObj);
        },
        save: function save(state) {
            var jsonState = JSON.stringify(state);
            localStorage.setItem(key, jsonState);
            return createFakePromise();
        }
    };
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9lbmdpbmVzL2xvY2FsU3RvcmFnZUZha2VQcm9taXNlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsSUFBTSxPQUFPLFNBQVAsSUFBTyxHQUFNLEVBQU47O0FBRWIsU0FBUyxpQkFBVCxDQUEyQixVQUEzQixFQUF1QztBQUNuQyxXQUFPO0FBQ0gsY0FBTSxnQkFBZTtnQkFBZCwyREFBSyxvQkFBUzs7QUFDakIsZUFBRyxVQUFILEVBRGlCO0FBRWpCLG1CQUFPLG1CQUFQLENBRmlCO1NBQWY7QUFJTixpQkFBTzttQkFBTTtTQUFOO0tBTFgsQ0FEbUM7Q0FBdkM7O2tCQVVlLFVBQUMsR0FBRDtXQUFVO0FBQ3JCLDhCQUFPO0FBQ0gsZ0JBQU0sWUFBWSxhQUFhLE9BQWIsQ0FBcUIsR0FBckIsQ0FBWixDQURIO0FBRUgsZ0JBQU0sVUFBVSxLQUFLLEtBQUwsQ0FBVyxTQUFYLEtBQXlCLEVBQXpCLENBRmI7QUFHSCxtQkFBTyxrQkFBa0IsT0FBbEIsQ0FBUCxDQUhHO1NBRGM7QUFPckIsNEJBQUssT0FBTztBQUNSLGdCQUFNLFlBQVksS0FBSyxTQUFMLENBQWUsS0FBZixDQUFaLENBREU7QUFFUix5QkFBYSxPQUFiLENBQXFCLEdBQXJCLEVBQTBCLFNBQTFCLEVBRlE7QUFHUixtQkFBTyxtQkFBUCxDQUhRO1NBUFM7O0NBQVYiLCJmaWxlIjoibG9jYWxTdG9yYWdlRmFrZVByb21pc2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBub29wID0gKCkgPT4ge307XG5cbmZ1bmN0aW9uIGNyZWF0ZUZha2VQcm9taXNlKHRoZW5SZXN1bHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0aGVuOiAoY2IgPSBub29wKSA9PiB7XG4gICAgICAgICAgICBjYih0aGVuUmVzdWx0KTtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVGYWtlUHJvbWlzZSgpO1xuICAgICAgICB9LFxuICAgICAgICBjYXRjaDogKCkgPT4gY3JlYXRlRmFrZVByb21pc2UoKVxuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IChrZXkpID0+ICh7XG4gICAgbG9hZCgpIHtcbiAgICAgICAgY29uc3QganNvblN0YXRlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICAgICAgY29uc3QganNvbk9iaiA9IEpTT04ucGFyc2UoanNvblN0YXRlKSB8fCB7fTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUZha2VQcm9taXNlKGpzb25PYmopO1xuICAgIH0sXG5cbiAgICBzYXZlKHN0YXRlKSB7XG4gICAgICAgIGNvbnN0IGpzb25TdGF0ZSA9IEpTT04uc3RyaW5naWZ5KHN0YXRlKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBqc29uU3RhdGUpO1xuICAgICAgICByZXR1cm4gY3JlYXRlRmFrZVByb21pc2UoKTtcbiAgICB9XG59KTtcbiJdfQ==